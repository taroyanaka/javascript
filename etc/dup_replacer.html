<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<script src="./vue3.js"></script>
<script src="./localforage.js"></script>
<script src="./ramda.@0.28.0.js"></script>
</head>
<body>
<div class="app">

<div>
<input type="button" value="save_data_to_all_save" @click="save_data_to_all_save">
</div>

<textarea name="a" id="a" cols="5" rows="10" v-model="a" @input=""></textarea>
<textarea name="b" id="b" cols="5" rows="10" v-model="b"></textarea>
<textarea name="c" id="c" cols="5" rows="10" v-model="c"></textarea>
<textarea name="d" id="d" cols="5" rows="10" v-model="result">{{ result }}</textarea>

<ul>
<li v-for="(item, index) in all_save" @click="save_data_set(index)">
<button @click="save_data_set(index)">save_data_set</button>
{{ index }}: {{ item }}
<button @click="save_data_delete(index)">save_data_delete</button>
</li>
</ul>

</div>
</body>
<script>
const app = Vue.createApp({
    data() {
        return {
            a: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
            b: 'BC\nEF\nHI\nXY',
            c: 'bc\nef\nhi\nxy',
            save_data: '',
            all_save: [],
        }
    },
    computed: {
        result: function () {
            this.save_data_load();

            let tmp = this.a;
            R.zip(
                this.b.split("\n"),
                this.c.split("\n"))
                    .forEach(V=>
                        tmp = tmp.replaceAll(V[0],
                                                V[1]));
            this.save_data = [
                this.a,
                this.b,
                this.c,
            ];
            return tmp;
        }
    },
    mounted() {
    },
    beforeUpdated() {
    },
    updated() {
    },
    methods: {
        save_data_to_all_save() {
            this.all_save.push(this.save_data);
            localStorage.setItem('key', JSON.stringify(this.all_save));
        },
        save_data_load() {
            this.all_save = JSON.parse(localStorage.getItem('key'));
        },
        save_data_set(INDEX) {
            [this.a, this.b, this.c] = this.all_save[INDEX];
        },
        save_data_delete(INDEX) {
            if (window.confirm("Do you really want to delete??ğŸ¦–\næœ¬å½“ã«å‰Šé™¤ã™ã‚‹ï¼Ÿ?ğŸ¦•")) {
                this.all_save.splice(INDEX, 1);
                localStorage.setItem('key', JSON.stringify(this.all_save));
            }
        },
    }
}).mount('.app');
</script>
</html>